<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.2.9 Chrome/140.0.7339.249 Electron/38.7.2 Safari/537.36" version="29.2.9">
  <diagram name="Страница — 1" id="ZJ-F43VltCH-spOizjtX">
    <mxGraphModel dx="6553" dy="3929" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="MkE2XTCr2j1R63xKhws4-7" parent="1" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=200;height=50;" value="Сидоренко В.C. ПР - 1, Вариант 6" vertex="1">
          <mxGeometry height="2320" width="2660" x="-2260" y="-950" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-8" parent="1" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=170;height=70;" value="Верхнеуровневая структура&lt;br&gt;сервисов" vertex="1">
          <mxGeometry height="610" width="1210" x="-2180" y="-880" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-9" parent="1" style="verticalAlign=top;align=center;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="&lt;h3&gt;Сервис IDM&lt;/h3&gt;" vertex="1">
          <mxGeometry height="120" width="180" x="-2034" y="-790" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-10" parent="1" style="verticalAlign=top;align=center;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="&lt;h3&gt;Сервис номенклатуры&lt;/h3&gt;" vertex="1">
          <mxGeometry height="120" width="180" x="-2034" y="-620" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-11" parent="1" style="verticalAlign=top;align=center;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="&lt;h3&gt;Сервис CRM&lt;/h3&gt;" vertex="1">
          <mxGeometry height="120" width="180" x="-1304" y="-720" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-12" parent="1" style="verticalAlign=top;align=center;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="&lt;h3&gt;Административная панель&amp;nbsp;&lt;/h3&gt;" vertex="1">
          <mxGeometry height="120" width="170" x="-1294" y="-430" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-15" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=55;entryDy=0;entryPerimeter=0;" target="MkE2XTCr2j1R63xKhws4-10">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1574" y="-660" />
              <mxPoint x="-1574" y="-565" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-17" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0;exitDx=65;exitDy=180;exitPerimeter=0;" target="MkE2XTCr2j1R63xKhws4-9">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1304" y="-660" />
              <mxPoint x="-1564" y="-660" />
              <mxPoint x="-1564" y="-717" />
            </Array>
            <mxPoint x="-1294.0000000000002" y="-664.0200000000001" as="sourcePoint" />
            <mxPoint x="-1834" y="-715" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-19" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=120;entryDy=85;entryPerimeter=0;" target="MkE2XTCr2j1R63xKhws4-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-20" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="http api" vertex="1">
          <mxGeometry height="26" width="80" x="-1714" y="-746" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-21" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="http api" vertex="1">
          <mxGeometry height="26" width="80" x="-1464" y="-690" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-22" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="http api" vertex="1">
          <mxGeometry height="26" width="80" x="-1224" y="-554" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-24" parent="1" style="html=1;whiteSpace=wrap;" value="Nginx" vertex="1">
          <mxGeometry height="50" width="110" x="-1614" y="-680" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-25" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="http api" vertex="1">
          <mxGeometry height="26" width="80" x="-1714" y="-598" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-26" parent="1" style="html=1;whiteSpace=wrap;" value="Nginx" vertex="1">
          <mxGeometry height="50" width="110" x="-1264" y="-528" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-27" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="http api" vertex="1">
          <mxGeometry height="26" width="80" x="-1224" y="-460" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-28" parent="1" style="shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;" value="k8s /&amp;nbsp;&lt;br&gt;docker -compose" vertex="1">
          <mxGeometry height="50" width="100" x="-1240" y="-850" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-30" parent="1" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=170;height=70;" value="Сервис IDM&amp;nbsp;&lt;br&gt;(Identity Management)" vertex="1">
          <mxGeometry height="610" width="1210" x="-890" y="-880" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-31" parent="1" style="align=left;overflow=fill;html=1;dropTarget=0;whiteSpace=wrap;" value="&lt;p style=&quot;margin:0px;margin-top:6px;text-align:center;&quot;&gt;&lt;b&gt;PostrgeSQL&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ &lt;b&gt;u&lt;span style=&quot;background-color: initial;&quot;&gt;sers&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;: Информация о пользователе&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ &lt;b&gt;roles&lt;/b&gt;: Уникальные роли&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ &lt;b&gt;permissions: &lt;/b&gt;Права для роли&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ &lt;b&gt;attributes: &lt;/b&gt;Уникальные атрибуты&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ &lt;b&gt;sessions: &lt;/b&gt;Хранение информации об авторизациях&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="130" width="320" x="-830" y="-750" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-32" parent="MkE2XTCr2j1R63xKhws4-31" style="shape=component;jettyWidth=8;jettyHeight=4;" value="" vertex="1">
          <mxGeometry height="20" relative="1" width="20" x="1" as="geometry">
            <mxPoint x="-24" y="4" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-34" parent="1" style="align=left;overflow=fill;html=1;dropTarget=0;whiteSpace=wrap;" value="&lt;p style=&quot;margin:0px;margin-top:6px;text-align:center;&quot;&gt;&lt;b&gt;Redis&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ UserId: Token&lt;br&gt;+ UserId: Roles&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ Role: Permissions&lt;/p&gt;" vertex="1">
          <mxGeometry height="90" width="180" x="-830" y="-580" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-35" parent="MkE2XTCr2j1R63xKhws4-34" style="shape=component;jettyWidth=8;jettyHeight=4;" value="" vertex="1">
          <mxGeometry height="20" relative="1" width="20" x="1" as="geometry">
            <mxPoint x="-24" y="4" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-36" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;span style=&quot;font-weight: normal;&quot;&gt;ttl: 5m&lt;/span&gt;" vertex="1">
          <mxGeometry height="26" width="50" x="-710" y="-544" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-41" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-42" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-34">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-480" y="-620" />
              <mxPoint x="-480" y="-535" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-79" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-76">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-81" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-78">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-82" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="MkE2XTCr2j1R63xKhws4-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-37" parent="1" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="" vertex="1">
          <mxGeometry height="190" width="390" x="-360" y="-750" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-38" parent="1" style="text;align=center;fontStyle=1;verticalAlign=top;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;h2&gt;&amp;nbsp;Backend&lt;/h2&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="26" width="100" x="-220" y="-736" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-39" parent="1" style="text;align=left;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=18;" value="Ф: FastAPI, SQLAlchemy, asyncpg, redis,&#xa;pydantic, alembic, uvicorn" vertex="1">
          <mxGeometry height="36" width="370" x="-355" y="-640" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-40" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;h2&gt;ЯП: Python&lt;/h2&gt;" vertex="1">
          <mxGeometry height="26" width="80" x="-340" y="-680" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-43" parent="1" style="html=1;whiteSpace=wrap;align=left;" value="&lt;h4&gt;&lt;br&gt;&lt;/h4&gt;" vertex="1">
          <mxGeometry height="200" width="1010" x="-840" y="-480" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-44" parent="1" style="text;align=left;fontStyle=1;verticalAlign=top;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;span style=&quot;font-weight: normal; font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Сервис необходим для хранения данных о пользователях, ролевых моделя, правах доступа, атрибутов,&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Используются следующие отношения (relations): пользователь - атрибут, пользователь - сессия, пользователь - роль, роль - права доступа.&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;Сервис реализуется в асихнронном стиле. Используется паттерн Построения дерева зависимостей (DI) с помощью fastapi.Depends.&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;Для кеширования инстансов классов клиентов используется декоратор lru_cache (Singleton паттерн&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-weight: 400; background-color: initial;&quot;&gt;без переопределения __new__).&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;Модели описываются с помощью pydantic 2.x.x, валидации полей зафиксированы с помощью&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-weight: 400; background-color: initial;&quot;&gt;pydantic.&lt;/span&gt;&lt;span style=&quot;font-weight: 400; background-color: initial;&quot;&gt;Field.&lt;br&gt;Для соответствия принципам SOLID используется паттерн написания абстрактных классов, от которых наследуются клиенты,&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400; background-color: initial;&quot;&gt;например: &lt;/span&gt;&lt;span style=&quot;background-color: initial; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;AbstractStorage&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;abc.ABC&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;) AbstractCache(abc.ABC).&lt;br&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;Для эффективного хранения данных в БД используются индексы. Миграции фиксируются и прогоняются с помощью библеотеки alembic&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;По одному из индексов создается партиционирование таблицы sessions. Ресурсы (БД) поднимается отдельным сервером.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font face=&quot;JetBrains Mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 13.0667px; font-weight: 400;&quot;&gt;Для снижения нагрузки на БД используется redis с небольшим ttl.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font face=&quot;JetBrains Mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 13.0667px; font-weight: 400;&quot;&gt;Для деплоя используются Docker + uvicorn + nginx.&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="200" width="980" x="-830" y="-480" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-76" parent="1" style="html=1;whiteSpace=wrap;" value="«interface»&lt;br&gt;&lt;b&gt;UsersApi&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="120" y="-760" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-77" parent="1" style="html=1;whiteSpace=wrap;" value="«interface»&lt;br&gt;&lt;b&gt;RolesApi&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="120" y="-680" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-78" parent="1" style="html=1;whiteSpace=wrap;" value="«interface»&lt;br&gt;&lt;b&gt;AccessApi&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="120" y="-612" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-84" parent="1" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=170;height=70;" value="Сервис Номенклатуры" vertex="1">
          <mxGeometry height="620" width="1210" x="-2180" y="-210" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-85" parent="1" style="align=left;overflow=fill;html=1;dropTarget=0;whiteSpace=wrap;" value="&lt;p style=&quot;margin:0px;margin-top:6px;text-align:center;&quot;&gt;&lt;b&gt;PostrgeSQL&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;+ &lt;b&gt;e&lt;code data-testid=&quot;code-block&quot; class=&quot;font-weight-400 rounded-md bg-state-ghost-hover p-1 text-sm whitespace-normal&quot;&gt;ditions&lt;/code&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;: Информация о изданиях&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;code style=&quot;&quot; data-testid=&quot;code-block&quot; class=&quot;font-weight-400 rounded-md bg-state-ghost-hover p-1 text-sm whitespace-normal&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;storage_locations&lt;/font&gt;&lt;/b&gt;&lt;/code&gt;&lt;font face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;:&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;Места хранения&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;+ &lt;/font&gt;&lt;b style=&quot;&quot;&gt;issue&lt;code style=&quot;&quot; data-testid=&quot;code-block&quot; class=&quot;font-weight-400 rounded-md bg-state-ghost-hover p-1 text-sm whitespace-normal&quot;&gt;_rules&lt;/code&gt;&lt;font face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;:&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;Правила выдачи&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;code style=&quot;&quot; data-testid=&quot;code-block&quot; class=&quot;font-weight-400 rounded-md bg-state-ghost-hover p-1 text-sm whitespace-normal&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;movements&lt;/font&gt;&lt;/b&gt;&lt;/code&gt;&lt;b style=&quot;font-family: IY_Gt4BMe_vEVIdZdZHN;&quot;&gt;:&amp;nbsp; &lt;/b&gt;&lt;font style=&quot;&quot; face=&quot;Helvetica&quot;&gt;Движение изданий (списания/пополнения)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;code style=&quot;&quot; data-testid=&quot;code-block&quot; class=&quot;font-weight-400 rounded-md bg-state-ghost-hover p-1 text-sm whitespace-normal&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;libraries&lt;/font&gt;&lt;/b&gt;&lt;/code&gt;&lt;font style=&quot;font-weight: bold;&quot; face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;: &lt;/font&gt;&lt;font style=&quot;&quot; face=&quot;Helvetica&quot;&gt;Информация о библиотеках&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;b&gt;edition_categories: &lt;/b&gt;Категории изданий&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ &lt;b&gt;authors&lt;/b&gt;: Информация об авторах&lt;/p&gt;" vertex="1">
          <mxGeometry height="150" width="340" x="-2120" y="-60" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-86" parent="MkE2XTCr2j1R63xKhws4-85" style="shape=component;jettyWidth=8;jettyHeight=4;" value="" vertex="1">
          <mxGeometry height="20" relative="1" width="20" x="1" as="geometry">
            <mxPoint x="-24" y="4" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-90" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-85">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-92" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-101">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-93" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-103">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-94" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="MkE2XTCr2j1R63xKhws4-102">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-95" parent="1" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="" vertex="1">
          <mxGeometry height="190" width="390" x="-1650" y="-80" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-96" parent="1" style="text;align=center;fontStyle=1;verticalAlign=top;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;h2&gt;&amp;nbsp;Backend&lt;/h2&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="26" width="100" x="-1510" y="-66" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-97" parent="1" style="text;align=left;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=18;" value="Ф: FastAPI, SQLAlchemy, asyncpg,&#xa;pydantic, alembic, uvicorn" vertex="1">
          <mxGeometry height="36" width="370" x="-1645" y="30" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-98" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;h2&gt;ЯП: Python&lt;/h2&gt;" vertex="1">
          <mxGeometry height="26" width="80" x="-1630" y="-10" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-99" parent="1" style="html=1;whiteSpace=wrap;align=left;" value="&lt;h4&gt;&lt;br&gt;&lt;/h4&gt;" vertex="1">
          <mxGeometry height="240" width="1075" x="-2125" y="150" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-100" parent="1" style="text;align=left;fontStyle=1;verticalAlign=top;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Сервис необходим для хранения данных о изданиях, адресного хранения изданий, правилах выдачи, категорий, информации о библиотеках,&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;фиксации перемещений и информации об авторах. Используются следующие отношения (relations):&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;издание - место хранения, издание - правило выдачи, издание - категории, издание - движение изданий, издание - авторы, место хранения - библиотека.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Сервис реализуется в асихнронном стиле. Используется паттерн Построения дерева зависимостей (DI) с помощью fastapi.Depends.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Для кеширования инстансов классов клиентов используется декоратор lru_cache (Singleton паттерн без переопределения __new__).&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Модели описываются с помощью pydantic 2.x.x, валидации полей зафиксированы с помощью pydantic.Field.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Для соответствия принципам SOLID используется паттерн написания абстрактных классов, от которых наследуются клиенты,&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;например: AbstractStorage(abc.ABC). Для эффективного хранения данных в БД используются индексы.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Миграции фиксируются и прогоняются с помощью библиотеки alembic Ресурсы (БД) поднимается отдельным сервером.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Для деплоя используются Docker + uvicorn + nginx.&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="230" width="1070" x="-2120" y="160" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-101" parent="1" style="html=1;whiteSpace=wrap;" value="«interface»&lt;br&gt;&lt;b&gt;EditionsApi&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="-1170" y="-90" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-102" parent="1" style="html=1;whiteSpace=wrap;" value="«interface»&lt;br&gt;&lt;b&gt;MovementsApi&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="-1170" y="-10" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-103" parent="1" style="html=1;whiteSpace=wrap;" value="«interface»&lt;br&gt;&lt;b&gt;StorageApi&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="-1170" y="58" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-104" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" target="MkE2XTCr2j1R63xKhws4-85">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-105" parent="1" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=170;height=70;" value="Сервис CRM&lt;br&gt;(Customer Relationship Management)" vertex="1">
          <mxGeometry height="620" width="1210" x="-890" y="-210" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-106" parent="1" style="align=left;overflow=fill;html=1;dropTarget=0;whiteSpace=wrap;" value="&lt;p style=&quot;margin:0px;margin-top:6px;text-align:center;&quot;&gt;&lt;b&gt;PostrgeSQL&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;issuance&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;: Информация о выдачах&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;+ &lt;/font&gt;&lt;b&gt;user_visits&lt;/b&gt;&lt;b style=&quot;font-family: IY_Gt4BMe_vEVIdZdZHN;&quot;&gt;: &lt;/b&gt;&lt;font face=&quot;Helvetica&quot;&gt;Посещение читателей&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font face=&quot;IY_Gt4BMe_vEVIdZdZHN&quot;&gt;+ &lt;/font&gt;&lt;b&gt;librarians&lt;/b&gt;&lt;b style=&quot;font-family: IY_Gt4BMe_vEVIdZdZHN;&quot;&gt;: &lt;/b&gt;&lt;font face=&quot;Helvetica&quot;&gt;Информация о библиотекарях&lt;/font&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="90" width="270" x="-760" y="-24" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-107" parent="MkE2XTCr2j1R63xKhws4-106" style="shape=component;jettyWidth=8;jettyHeight=4;" value="" vertex="1">
          <mxGeometry height="20" relative="1" width="20" x="1" as="geometry">
            <mxPoint x="-24" y="4" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-109" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-118">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-110" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-120">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-111" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="MkE2XTCr2j1R63xKhws4-119">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-124" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" target="MkE2XTCr2j1R63xKhws4-106">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-112" parent="1" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="" vertex="1">
          <mxGeometry height="170" width="390" x="-295" y="-64" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-113" parent="1" style="text;align=center;fontStyle=1;verticalAlign=top;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;h2&gt;&amp;nbsp;Backend&lt;/h2&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="26" width="100" x="-150" y="-66" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-114" parent="1" style="text;align=left;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=18;" value="Ф: FastAPI, SQLAlchemy, asyncpg,&#xa;pydantic, alembic, uvicorn" vertex="1">
          <mxGeometry height="36" width="370" x="-285" y="30" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-115" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;h2&gt;ЯП: Python&lt;/h2&gt;" vertex="1">
          <mxGeometry height="26" width="80" x="-270" y="-10" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-116" parent="1" style="html=1;whiteSpace=wrap;align=left;" value="&lt;h4&gt;&lt;br&gt;&lt;/h4&gt;" vertex="1">
          <mxGeometry height="200" width="1075" x="-765" y="190" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-117" parent="1" style="text;align=left;fontStyle=1;verticalAlign=top;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Сервис необходим для хранения данных о выдачах изданий, посещений читателей, а также информации о библиотекарях&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: 400; background-color: initial;&quot;&gt;.&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400; background-color: initial;&quot;&gt;Сервис обогащает данные в сервисе IDM и сервисе Номенклатуры внутри хранит только идентификаторы пользователей и изданий.&lt;br&gt;Используются следующие отношения (relations):&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;выдача - библиотекарь.&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Сервис реализуется в асихнронном стиле. Используется паттерн Построения дерева зависимостей (DI) с помощью fastapi.Depends.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Для кеширования инстансов классов клиентов используется декоратор lru_cache (Singleton паттерн без переопределения __new__).&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Модели описываются с помощью pydantic 2.x.x, валидации полей зафиксированы с помощью pydantic.Field.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Для соответствия принципам SOLID используется паттерн написания абстрактных классов, от которых наследуются клиенты,&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;например: AbstractStorage(abc.ABC). Для эффективного хранения данных в БД используются индексы.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Миграции фиксируются и прогоняются с помощью библиотеки alembic. Ресурсы (БД) поднимается отдельным сервером.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Для деплоя используются Docker + uvicorn + nginx.&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="190" width="1070" x="-750" y="195" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-118" parent="1" style="html=1;whiteSpace=wrap;" value="«interface»&lt;br&gt;&lt;b&gt;IssuesApi&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="190" y="-90" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-119" parent="1" style="html=1;whiteSpace=wrap;" value="«interface»&lt;br&gt;&lt;b&gt;VisitsApi&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="190" y="-10" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-120" parent="1" style="html=1;whiteSpace=wrap;" value="«interface»&lt;br&gt;&lt;b&gt;LibrariansApi&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="190" y="58" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-121" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" target="MkE2XTCr2j1R63xKhws4-106">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-122" parent="1" style="verticalAlign=top;align=center;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="&lt;h3&gt;Сервис IDM&lt;/h3&gt;" vertex="1">
          <mxGeometry height="90" width="160" x="-720" y="-130" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-123" parent="1" style="verticalAlign=top;align=center;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="&lt;h3&gt;Сервис Номенклатуры&lt;/h3&gt;" vertex="1">
          <mxGeometry height="90" width="170" x="-720" y="90" as="geometry" />
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-125" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=40;entryDy=0;entryPerimeter=0;" target="MkE2XTCr2j1R63xKhws4-122">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-420" y="21" />
              <mxPoint x="-420" y="-90" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="MkE2XTCr2j1R63xKhws4-127" edge="1" parent="1" source="MkE2XTCr2j1R63xKhws4-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=40;entryDy=0;entryPerimeter=0;" target="MkE2XTCr2j1R63xKhws4-123">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-420" y="21" />
              <mxPoint x="-420" y="130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-1" parent="1" style="rounded=0;whiteSpace=wrap;html=1;align=left;" value="&lt;font style=&quot;font-size: 14px;&quot; face=&quot;Helvetica&quot;&gt;Выбрана микросервисная архитектура, так как логически функционал разделим на независимые части. Данная архитектура позволит масштабировать самые высоконагруженные сервисы (например сервис IDM будет обрабатывать авторизационные данные при каждом запросе пользователя, что создаст на него большую нагрузку).&lt;br&gt;В качестве прокси сервера выбран nginx, из-за простоты конфигурации и эффкективности.&lt;br&gt;Микросервсы будут разворачиваться в docker-compose или&amp;nbsp;Kubernetes (k8s). k8s целесообразен при необходимости масштабирования подов сервиса&lt;/font&gt;" vertex="1">
          <mxGeometry height="180" width="690" x="-2050" y="-460" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-37" parent="1" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=170;height=70;" value="Административная панель &lt;br&gt;(UI)" vertex="1">
          <mxGeometry height="620" width="1210" x="-1535" y="585" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-44" parent="1" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="" vertex="1">
          <mxGeometry height="170" width="390" x="-1190" y="697.25" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-45" parent="1" style="text;align=center;fontStyle=1;verticalAlign=top;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;h2&gt;Frontend&lt;/h2&gt;" vertex="1">
          <mxGeometry height="26" width="100" x="-1050" y="710" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-46" parent="1" style="text;align=left;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=18;" value="Ф: vue, vue-router, vue-cookies, pinia" vertex="1">
          <mxGeometry height="36" width="370" x="-1180" y="797.5" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-47" parent="1" style="text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;h2&gt;ЯП: JavaScript&lt;/h2&gt;" vertex="1">
          <mxGeometry height="35" width="160" x="-1190" y="764.75" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-48" parent="1" style="html=1;whiteSpace=wrap;align=left;" value="&lt;h4&gt;&lt;br&gt;&lt;/h4&gt;" vertex="1">
          <mxGeometry height="90" width="660" x="-1520" y="1070" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-49" parent="1" style="text;align=left;fontStyle=1;verticalAlign=top;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;" value="&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Сервис необходим для создания web интерфейса управления библиотечным фондом.&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Для деплоя используются Docker + nginx.&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="420" x="-1510" y="1080" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-53" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1270" y="861" as="sourcePoint" />
            <mxPoint x="-1270" y="861" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-54" parent="1" style="verticalAlign=top;align=center;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;" value="&lt;h3&gt;Сервис CRM&lt;/h3&gt;" vertex="1">
          <mxGeometry height="113.38" width="216" x="-1510" y="725.56" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-61" parent="1" style="align=left;overflow=fill;html=1;dropTarget=0;whiteSpace=wrap;" value="&lt;p style=&quot;margin:0px;margin-top:6px;text-align:center;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Views&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;+ СreateIssue: Создать выдачу&lt;br&gt;+ ListIssues: Список активных выдач&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;+ ReturnEditions: Возврат издания&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;+ CloseIssue: Закрытие выдачи&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;+ IssueHistory: История выдач&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;+&amp;nbsp;LibrarianWorkload:&amp;nbsp;Работа библиотекарей&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;+ Dashboard: Основная краткая информация&lt;/font&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="210" width="315" x="-715" y="700" as="geometry" />
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-62" parent="Ex8wvMD0HO7A7OOPiHPg-61" style="shape=component;jettyWidth=8;jettyHeight=4;" value="" vertex="1">
          <mxGeometry height="20" relative="1" width="20" x="1" as="geometry">
            <mxPoint x="-24" y="4" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Ex8wvMD0HO7A7OOPiHPg-67" edge="1" parent="1" source="Ex8wvMD0HO7A7OOPiHPg-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=56.125;entryDy=0;entryPerimeter=0;" target="Ex8wvMD0HO7A7OOPiHPg-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
